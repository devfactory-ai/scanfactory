# ScanFactory OCR Service - Environment Variables
# Copy this file to .env and fill in your values

# =============================================================================
# General Configuration
# =============================================================================
OCR_DEFAULT_ENGINE=auto                     # auto, gutenocr, mistral, surya, paddleocr
OCR_DEVICE=auto                             # auto, cuda, mps, cpu

# =============================================================================
# GutenOCR Configuration (VLM-based)
# =============================================================================
# Model selection: rootsautomation/GutenOCR-3B or rootsautomation/GutenOCR-7B
GUTENOCR_MODEL=rootsautomation/GutenOCR-3B

# Force CPU mode (recommended for 3B model on systems without GPU)
GUTENOCR_USE_CPU=false

# Output format: TEXT, TEXT2D, LINES, WORDS, PARAGRAPHS, LATEX
GUTENOCR_OUTPUT_FORMAT=TEXT

# Model cache directory
GUTENOCR_CACHE_DIR=/app/models

# Batch processing settings (GPU only)
GUTENOCR_MAX_BATCH_SIZE=4

# Maximum tokens to generate
GUTENOCR_MAX_NEW_TOKENS=4096

# =============================================================================
# Mistral OCR Configuration (API-based)
# =============================================================================
# Your Mistral AI API key (required for Mistral OCR)
# Get your key at: https://console.mistral.ai/
MISTRAL_API_KEY=your_mistral_api_key_here

# Model version
MISTRAL_MODEL=mistral-ocr-2512

# API settings
MISTRAL_API_URL=https://api.mistral.ai/v1/ocr
MISTRAL_TIMEOUT=60
MISTRAL_RETRY_ATTEMPTS=3

# Feature flags
MISTRAL_EXTRACT_TABLES=true
MISTRAL_EXTRACT_STRUCTURE=true

# =============================================================================
# HuggingFace Configuration
# =============================================================================
# HuggingFace token for private models (optional)
HF_TOKEN=

# Model cache location
HF_HOME=/app/models
TRANSFORMERS_CACHE=/app/models

# =============================================================================
# Storage Configuration (for Mistral document uploads)
# =============================================================================
# Storage type: s3, azure, gcs, local
STORAGE_TYPE=local

# S3 Configuration (if STORAGE_TYPE=s3)
S3_BUCKET=scanfactory-uploads
S3_REGION=eu-west-1
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=

# Azure Configuration (if STORAGE_TYPE=azure)
AZURE_STORAGE_CONNECTION_STRING=
AZURE_CONTAINER_NAME=

# =============================================================================
# Logging and Monitoring
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json

# Prometheus metrics
ENABLE_METRICS=true
METRICS_PORT=9090

# =============================================================================
# Performance Settings
# =============================================================================
# Memory cleanup after each document
MEMORY_CLEANUP=true

# Maximum concurrent workers
MAX_WORKERS=4

# Batch processing
BATCH_PROCESSING=true
