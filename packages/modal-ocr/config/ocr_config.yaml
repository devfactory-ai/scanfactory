ocr:
  # Moteur par défaut: paddleocr, tesseract, easyocr, hunyuan, surya
  default_engine: "surya"

  # Répertoire de sortie
  output_dir: "./output"

  # Configuration par moteur
  engines:
    paddleocr:
      enabled: true
      device: "auto"  # auto, cuda, mps, cpu
      languages: ["fr", "en"]
      det_db_thresh: 0.3
      det_db_box_thresh: 0.5
      det_db_unclip_ratio: 1.6
      rec_batch_num: 6

    tesseract:
      enabled: true
      lang: "fra+eng"
      config: "--psm 3"

    easyocr:
      enabled: true
      languages: ["fr", "en"]
      gpu: true

    hunyuan:
      enabled: true
      device: "auto"  # auto, cuda, mps, cpu
      languages: ["en", "fr", "ar", "zh"]
      tasks:
        - detection
        - parsing
        - layout
        - reading_order
      batch_size: 32
      memory_cleanup: true

    surya:
      enabled: true
      device: "auto"
      languages: ["en", "fr"]
      pipeline_options:
        do_ocr: true
        allow_external_plugins: true
      memory_cleanup: true

    # GutenOCR - VLM based on Qwen2.5-VL
    gutenocr:
      enabled: true
      device: "auto"  # auto, cuda, mps, cpu
      model_size: "3b"  # 3b or 7b
      languages: ["en", "fr", "ar", "zh", "de", "es", "it", "pt"]
      output_format: "TEXT"  # TEXT, TEXT2D, LINES, WORDS, PARAGRAPHS, LATEX
      max_new_tokens: 4096
      do_sample: false
      temperature: 0.0
      batch_size: 4
      memory_cleanup: true
      hardware:
        cpu:
          enabled: true
          max_batch_size: 2
          model_size: "3b"  # Force 3B on CPU
        gpu:
          enabled: true
          batch_size: 4
          model_size: "auto"  # Use 7B if VRAM > 16GB
          min_vram_gb: 8

    # Mistral OCR - Commercial API
    mistral_ocr:
      enabled: true
      # api_key: set via MISTRAL_API_KEY env variable
      api_url: "https://api.mistral.ai/v1/ocr"
      model: "mistral-ocr-2512"
      timeout: 60
      retry_attempts: 3
      extract_tables: true
      extract_structure: true
      cost_per_1000_pages: 2.0
      rate_limit:
        requests_per_minute: 60
        tokens_per_minute: 100000

  # Options de sortie
  output:
    formats:
      - markdown
      - json
    preserve_layout: true
    include_metadata: true

  # Performance
  performance:
    batch_processing: true
    max_workers: 4
    memory_cleanup: true  # Vider cache GPU après chaque doc
